<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Gallery — Angel Disla</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0b0b0c">

  <link rel="icon" href="../../../assets/favicon.ico">
  <link rel="stylesheet" href="../../../assets/global.css">

  <style>
    :root{
      --bg0:#07080a; --bg1:#0a0b0f;
      --fg:#fff;
      --line:rgba(255,255,255,.12);
      --line2:rgba(255,255,255,.18);
      --shadow: 0 26px 90px rgba(0,0,0,.68);
      --max:1100px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      color:var(--fg);
      background:
        radial-gradient(1200px 700px at 15% -10%, rgba(255,255,255,.07), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(255,255,255,.04), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      letter-spacing:.01em;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:26px 18px 70px;}

    /* Masonry */
    .masonry{
      margin-top:18px;
      columns: 3 320px;
      column-gap: 12px;
    }
    .item{
      break-inside: avoid;
      margin: 0 0 12px;
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);
      cursor:pointer;
      transform: translateY(0);
      transition: transform .18s ease, border-color .18s ease;
    }
    .item:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.22);
    }
    .item img{
      width:100%;
      height:auto;
      display:block;
      filter: saturate(.98) contrast(1.02);
    }

    /* Lightbox */
    .lightbox{
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.88);
      display:none;
      place-items:center;
      z-index:9999;
      padding:18px;
    }
    .lightbox.open{display:grid;}
    .lbInner{
      width:min(1280px, 100%);
      height:min(86vh, 860px);
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.35);
      box-shadow: 0 26px 90px rgba(0,0,0,.70);
      position:relative;
      overflow:hidden;
      display:grid;
      grid-template-rows: 1fr auto;
    }

    /* Main image area */
    .lbMain{
      position:relative;
      display:grid;
      place-items:center;
      overflow:hidden;
      background:#000;
    }
    .lbImg{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      background:#000;
    }

    /* Top controls */
    .lbTop{
      position:absolute;
      top:14px; left:14px; right:14px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      pointer-events:none;
      z-index:5;
    }
    .lbCount{
      pointer-events:auto;
      font-size:12px;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(255,255,255,.70);
      background: rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.12);
      padding:8px 10px;
      border-radius:999px;
      backdrop-filter: blur(10px);
    }
    .lbBtn{
      pointer-events:auto;
      width:44px; height:44px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.35);
      display:grid;
      place-items:center;
      cursor:pointer;
      backdrop-filter: blur(10px);
      transition: transform .18s ease, background .18s ease, border-color .18s ease;
    }
    .lbBtn:hover{
      transform: translateY(-1px);
      background: rgba(0,0,0,.52);
      border-color: rgba(255,255,255,.26);
    }
    .lbBtn svg{width:18px;height:18px; fill:#fff; opacity:.9}

    /* Left/right click zones */
    .lbZones{
      position:absolute;
      inset:0;
      display:flex;
      z-index:4;
    }
    .zone{
      flex:1;
      cursor:pointer;
      opacity:0;
    }

    /* Filmstrip */
    .strip{
      border-top: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(10px);
      padding: 10px 10px 12px;
      overflow-x:auto;
      overflow-y:hidden;
      white-space:nowrap;
    }
    .thumbs{
      display:inline-flex;
      gap:10px;
      align-items:center;
    }
    .thumb{
      width: 86px;
      height: 56px;
      border-radius: 12px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      cursor:pointer;
      flex: 0 0 auto;
      position:relative;
      transform: translateY(0);
      transition: transform .16s ease, border-color .16s ease, box-shadow .16s ease;
    }
    .thumb:hover{
      transform: translateY(-1px);
      border-color: rgba(255,255,255,.22);
    }
    .thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(.98) contrast(1.02);
      transform: scale(1.02);
    }
    .thumb.active{
      border-color: rgba(255,255,255,.55);
      box-shadow: 0 0 0 2px rgba(255,255,255,.12);
    }

    footer{
      margin-top:28px;
      text-align:center;
      color:rgba(255,255,255,.55);
      font-size:12px;
      letter-spacing:.08em;
      text-transform:uppercase;
    }

    /* Mobile thumbs slightly bigger */
    @media (max-width:640px){
      .thumb{width: 92px; height: 60px;}
      .lightbox{padding:12px;}
    }
  </style>
</head>

<body>

  <div class="top">
    <div class="topInner" style="max-width:1100px;">
      <a class="brand" href="../../../index.html">Angel Disla</a>
      <div class="nav">
        <a href="../../../index.html">Home</a>
        <a href="../../../work/">Work</a>
        <a href="../../../video/">Video</a>
        <a href="../../">Photo</a>
        <a href="mailto:angeldisla65@gmail.com">Contact</a>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="masonry" id="masonry"></div>
    <footer>© <span id="y"></span> Angel Disla</footer>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" aria-hidden="true">
    <div class="lbInner" role="dialog" aria-label="Image viewer">
      <div class="lbMain">
        <div class="lbTop">
          <div class="lbCount" id="lbCount">1 / 1</div>
          <button class="lbBtn" id="lbClose" aria-label="Close">
            <svg viewBox="0 0 24 24"><path d="M18.3 5.7 12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3l6.3 6.3 6.3-6.3z"/></svg>
          </button>
        </div>

        <img class="lbImg" id="lbImg" alt="Expanded photo">

        <div class="lbZones" aria-hidden="true">
          <div class="zone" id="zonePrev"></div>
          <div class="zone" id="zoneNext"></div>
        </div>

        <button class="lbBtn" id="lbPrev" aria-label="Previous" style="position:absolute; left:14px; top:50%; transform:translateY(-50%); z-index:6;">
          <svg viewBox="0 0 24 24"><path d="M15.4 7.4 10.8 12l4.6 4.6-1.4 1.4L8 12l6-6z"/></svg>
        </button>
        <button class="lbBtn" id="lbNext" aria-label="Next" style="position:absolute; right:14px; top:50%; transform:translateY(-50%); z-index:6;">
          <svg viewBox="0 0 24 24"><path d="m8.6 16.6 4.6-4.6-4.6-4.6L10 6l6 6-6 6z"/></svg>
        </button>
      </div>

      <div class="strip">
        <div class="thumbs" id="thumbs"></div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("y").textContent = new Date().getFullYear();

    // CHANGE THIS PER GALLERY:
    // product | events | studio | portraits
    const FOLDER = "studio";

    // expects 01.jpg, 02.jpg ... (increase if needed)
    const MAX = 80;

    const base = `../../../assets/photo/${FOLDER}/`;
    const masonry = document.getElementById("masonry");

    // Lightbox elements
    const lightbox = document.getElementById("lightbox");
    const lbImg = document.getElementById("lbImg");
    const lbCount = document.getElementById("lbCount");
    const lbClose = document.getElementById("lbClose");
    const lbPrev = document.getElementById("lbPrev");
    const lbNext = document.getElementById("lbNext");
    const zonePrev = document.getElementById("zonePrev");
    const zoneNext = document.getElementById("zoneNext");
    const thumbsEl = document.getElementById("thumbs");

    // Build list of candidate sources
    const candidates = [];
    for (let i = 1; i <= MAX; i++){
      const n = String(i).padStart(2, "0");
      candidates.push(`${base}${n}.jpg`);
    }

    // Render masonry; missing images remove themselves
    candidates.forEach((src, i) => {
      const d = document.createElement("div");
      d.className = "item";
      d.innerHTML = `<img loading="lazy" src="${src}" alt="Photo ${i+1}">`;
      const img = d.querySelector("img");
      img.addEventListener("error", () => d.remove());
      d.addEventListener("click", () => openAtVisibleIndex(i)); // may shift after removals
      masonry.appendChild(d);
    });

    function getVisibleSources(){
      return Array.from(masonry.querySelectorAll("img")).map(img => img.src);
    }

    let visible = [];
    let idx = 0;

    function buildFilmstrip(){
      thumbsEl.innerHTML = "";
      visible.forEach((src, i) => {
        const t = document.createElement("div");
        t.className = "thumb";
        t.innerHTML = `<img loading="lazy" src="${src}" alt="Thumb ${i+1}">`;
        t.addEventListener("click", () => openAt(i));
        thumbsEl.appendChild(t);
      });
      setActiveThumb();
    }

    function setActiveThumb(){
      const thumbs = Array.from(thumbsEl.querySelectorAll(".thumb"));
      thumbs.forEach((t, i) => t.classList.toggle("active", i === idx));

      // auto-scroll filmstrip so active stays visible
      const active = thumbs[idx];
      if(active){
        active.scrollIntoView({behavior:"smooth", inline:"center", block:"nearest"});
      }
    }

    function openAt(i){
      visible = getVisibleSources();
      if(!visible.length) return;
      idx = (i + visible.length) % visible.length;
      lbImg.src = visible[idx];
      lbCount.textContent = `${idx + 1} / ${visible.length}`;
      lightbox.classList.add("open");
      lightbox.setAttribute("aria-hidden","false");
      buildFilmstrip();
      setActiveThumb();
    }

    // When user clicks a masonry item, the visible index may differ because missing imgs were removed.
    function openAtVisibleIndex(roughIndex){
      visible = getVisibleSources();
      if(!visible.length) return;

      // Find closest matching by filename if possible
      const target = candidates[roughIndex];
      const matchIndex = visible.findIndex(v => v.endsWith(target.split("/").pop()));
      openAt(matchIndex >= 0 ? matchIndex : 0);
    }

    function close(){
      lightbox.classList.remove("open");
      lightbox.setAttribute("aria-hidden","true");
      lbImg.src = "";
    }

    function prev(){
      visible = getVisibleSources();
      if(!visible.length) return;
      idx = (idx - 1 + visible.length) % visible.length;
      lbImg.src = visible[idx];
      lbCount.textContent = `${idx + 1} / ${visible.length}`;
      setActiveThumb();
    }

    function next(){
      visible = getVisibleSources();
      if(!visible.length) return;
      idx = (idx + 1) % visible.length;
      lbImg.src = visible[idx];
      lbCount.textContent = `${idx + 1} / ${visible.length}`;
      setActiveThumb();
    }

    // Controls
    lbClose.addEventListener("click", close);
    lbPrev.addEventListener("click", prev);
    lbNext.addEventListener("click", next);

    // Click zones
    zonePrev.addEventListener("click", prev);
    zoneNext.addEventListener("click", next);

    // Click outside dialog closes
    lightbox.addEventListener("click", (e)=>{ if(e.target === lightbox) close(); });

    // Keyboard
    document.addEventListener("keydown", (e)=>{
      if(!lightbox.classList.contains("open")) return;
      if(e.key === "Escape") close();
      if(e.key === "ArrowLeft") prev();
      if(e.key === "ArrowRight") next();
    });

    // Touch swipe (simple)
    let x0 = null;
    lbImg.addEventListener("touchstart", (e)=>{ x0 = e.touches[0].clientX; }, {passive:true});
    lbImg.addEventListener("touchend", (e)=>{
      if(x0 === null) return;
      const x1 = e.changedTouches[0].clientX;
      const dx = x1 - x0;
      x0 = null;
      if(Math.abs(dx) < 40) return;
      if(dx > 0) prev(); else next();
    }, {passive:true});
  </script>

</body>
</html>
